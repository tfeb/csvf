#!/usr/bin/env python
#
# Cut fields from CSV files
#
#    csvf f1 f2 f3 < csvfile
#
# prints the fields of a csv file, separated by a space (or sep,
# below).
#
# Field numbers start from 1: 0 is the whole row.  If you give no
# fields it prints the whole row. Field numbers greater than the
# length of the row are replaced by the out-of-range indicator which
# is oor below, by default "-".
#
# fmt (below) is a function which is applied to each element in
# selected to format it.  It is deviously defined as the method of a
# format string below: a more obvious definition might be
#
#  orf = "\"{0}\""
#  def fmt(e):
#      orf.format(e)
#
# which would make orf the thing you modified.
#

from sys import stdin, argv, exit
from csv import reader

# These should be command-line switches, or derived from them
sep = " "                       # separator
oor = "-"                       # out of records indicator
fmt = "\"{0}\"".format          # record formatter function

if __name__ == '__main__':
    try:
        fields = ([int(i) - 1  for i in argv[1::]]
                  if len(argv) > 1
                  else [-1])
        for f in fields:
            if fields < -1:
                raise Exception("fields should be zero or positive")
        for row in reader(stdin):
            l = len(row)
            print sep.join((fmt(row[f])
                            if 0 <= f < l
                            else (sep.join(fmt(e) for e in row)
                                  if f == -1
                                  else oor))
                           for f in fields)
    except Exception as e:
        exit(e)
else:
    raise Exception("not a module")
